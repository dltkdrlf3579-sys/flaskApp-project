# ======================================================================
# Flask Portal 설정 파일 템플릿
# 이 파일을 복사하여 config.ini로 저장하고 설정하세요
# ======================================================================

[DEFAULT]
# 기본 설정
DEBUG = False
SECRET_KEY = CHANGE-THIS-TO-RANDOM-SECRET-KEY
UPLOAD_FOLDER = uploads
EDIT_PASSWORD = admin123
ADMIN_PASSWORD = admin789

[DATABASE]
# 로컬 SQLite (업무 데이터)
LOCAL_DB_PATH = portal.db

# IQADB 모듈 경로 설정 (본인의 환경에 맞게 수정하세요)
IQADB_MODULE_PATH = C:/Users/user/AppData/Local/aipforge/pkgs/dist/obf/PY310
# 기본 fallback 경로
DEFAULT_MODULE_PATH = C:/Users/user/AppData/Local/aipforge/pkgs/dist/obf/PY310

# 외부 DB 연동 활성화 여부 (IQADB_CONNECT310 사용)
EXTERNAL_DB_ENABLED = True

[SECURITY]
# 보안 설정
MAX_UPLOAD_SIZE_MB = 10
ALLOWED_EXTENSIONS = pdf,doc,docx,xls,xlsx,png,jpg,jpeg

[LOGGING]
LOG_LEVEL = INFO
LOG_FILE = app.log

[DASHBOARD]
# 대시보드 설정
DASHBOARD_URL = https://your-dashboard.com
DASHBOARD_ENABLED = True

[SQL_QUERIES]
# ======================================================================
# 🔧 사용자 정의 SQL 쿼리 설정
# 실제 데이터베이스 구조에 맞게 수정하세요
# ⚠️ 중요: 이 쿼리들은 GitHub 업데이트 시에도 보존됩니다!
# ======================================================================

# 협력사 정보 조회 쿼리 (11개 컬럼) - 실제 DB에 맞게 수정하세요
PARTNERS_QUERY = SELECT 
    business_reg_no as business_number,
    corp_name as company_name,
    partner_class as partner_class,
    industry_major as business_type_major,
    industry_minor as business_type_minor,
    hazard_work_yn as hazard_work_flag,
    ceo_name as representative,
    corp_address as address,
    avg_age as average_age,
    revenue as annual_revenue,
    transaction_cnt as transaction_count
    FROM your_schema.your_partners_table
    WHERE business_reg_no IS NOT NULL
    ORDER BY corp_name

# 사고 정보 조회 쿼리 - 실제 DB에 맞게 수정하세요
ACCIDENTS_QUERY = SELECT 
    business_reg_no as business_number,
    incident_date as accident_date,
    incident_type as accident_type,
    incident_location as accident_location,
    incident_desc as accident_description,
    injury_grade as injury_level,
    injury_count as injured_count,
    cause_analysis,
    prevent_action as preventive_measures,
    report_date,
    reporter as reporter_name
    FROM your_schema.your_accidents_table
    WHERE business_reg_no IS NOT NULL
      AND incident_date >= '2020-01-01'
    ORDER BY incident_date DESC

# ======================================================================
# 설정 가이드:
# 
# 1. 이 파일을 config.ini로 복사하세요
# 2. DEFAULT 섹션의 SECRET_KEY와 EDIT_PASSWORD를 변경하세요
# 3. PARTNERS_QUERY를 실제 DB 구조에 맞게 수정하세요
#    - your_schema.your_table → 실제 스키마.테이블명
#    - 컬럼명들을 실제 DB 컬럼명으로 변경
# 
# SQL 쿼리 수정 방법:
# - 실제 컬럼명으로 변경 (예: business_reg_no → 실제_사업자번호_컬럼)
# - AS 문으로 포털에서 사용할 이름 지정 (as business_number 유지)
# - 11개 컬럼 모두 맞춰주세요
# 
# 예시:
# real_column_name as portal_column_name
# ======================================================================

[MASTER_DATA_QUERIES]
# ======================================================================
# 마스터 데이터 조회 쿼리 설정
# ======================================================================

# 건물 정보 조회 쿼리
BUILDING_QUERY = SELECT building_code, building_name, building_address, building_type FROM building_master WHERE 1=1

# 부서 정보 조회 쿼리  
DEPARTMENT_QUERY = SELECT dept_code, dept_name, parent_dept_code, dept_level FROM department_master WHERE 1=1

# 협력사 근로자 조회 쿼리
CONTRACTOR_QUERY = SELECT worker_id, worker_name, company_name, business_number FROM contractor_workers WHERE 1=1
