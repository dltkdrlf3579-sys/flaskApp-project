{% extends "base.html" %}

{% block title %}대시보드 - 상생EHS Portal{% endblock %}

{% block style %}
<style>
/* base.html의 container 스타일 오버라이드 */
body {
    margin: 0;
    padding: 0;
    overflow-y: auto;  /* 세로 스크롤 허용 */
    overflow-x: hidden;  /* 가로 스크롤 차단 */
}

/* 전체 화면 대시보드 컨테이너 - 1920x940 고정 */
.dashboard-wrapper {
    position: relative;  /* absolute 대신 relative 사용 */
    top: 0;
    left: 0;
    width: 1920px;  /* 너비 1920px 고정 */
    height: 940px;  /* 높이 940px 고정 */
    margin: 0 auto;  /* 가운데 정렬 */
    padding: 0;
    background: #f5f5f5; /* 로딩 중 배경색 */
    z-index: 1; /* 낮은 z-index */
}

/* 대시보드 상단 여백 제거 - 더 이상 필요없음 */

/* iframe 전체 화면 */
.dashboard-iframe {
    width: 100%;
    height: 100%;
    border: none;
    margin: 0;
    padding: 0;
    display: block;
    background: white;
    position: relative;
    z-index: 1; /* 드롭다운 메뉴보다 뒤에 */
}


/* 로딩 메시지 (간단하게) */
.loading-msg {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #666;
    font-size: 16px;
}
</style>
{% endblock %}

{% block content %}
<!-- container 클래스 제거하여 전체 화면 사용 -->
<div class="dashboard-wrapper" id="dashboardWrapper">
    {% if dashboard_config.enabled %}
        <!-- 로딩 메시지 -->
        <div class="loading-msg" id="loadingMsg">대시보드를 불러오는 중...</div>
        
        <!-- 스팟파이어 대시보드 iframe -->
        <iframe 
            id="dashboardFrame"
            class="dashboard-iframe" 
            src="{{ dashboard_config.url }}"
            title="EHS 대시보드"
            onload="document.getElementById('loadingMsg').style.display='none';"
        ></iframe>
    {% else %}
        <!-- 대시보드 비활성화 시 메시지 -->
        <div class="loading-msg">
            대시보드가 비활성화되어 있습니다.<br><br>
            <a href="{{ url_for('page_view', url='partner-standards') }}">협력사 정보 보기</a>
        </div>
    {% endif %}
</div>

{% endblock %}