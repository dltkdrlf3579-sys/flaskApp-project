<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>권한 관리 시스템</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* 기존 UI 스타일 일치 */
        body {
            background-color: #f5f7fa;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
        }

        /* 보라색 그라데이션 헤더 */
        .main-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 24px 32px;
            border-radius: 12px 12px 0 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .main-header h1 {
            font-size: 24px;
            font-weight: 600;
            margin: 0;
            display: flex;
            align-items: center;
        }

        .main-header h1 i {
            margin-right: 12px;
            font-size: 20px;
        }

        /* 서브 헤더 스타일 */
        .sub-header {
            background: linear-gradient(135deg, #6a89cc 0%, #8e7ec3 100%);
            color: white;
            padding: 16px 24px;
            border-radius: 8px;
            margin-bottom: 24px;
        }

        .sub-header h2 {
            font-size: 18px;
            margin: 0;
            font-weight: 500;
            opacity: 0.9;
        }

        .sub-header span {
            font-size: 14px;
            opacity: 0.7;
        }

        /* 탭 네비게이션 */
        .tab-navigation {
            background: white;
            border-bottom: 1px solid #e2e8f0;
            padding: 0;
            margin-top: -1px;
        }

        .tab-navigation .nav-item {
            margin: 0;
        }

        .tab-navigation .nav-link {
            color: #64748b;
            padding: 16px 24px;
            border: none;
            border-radius: 0;
            font-weight: 500;
            position: relative;
            transition: all 0.3s ease;
        }

        .tab-navigation .nav-link:hover {
            color: #667eea;
            background: rgba(102, 126, 234, 0.05);
        }

        .tab-navigation .nav-link.active {
            color: #667eea;
            background: white;
        }

        .tab-navigation .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: #667eea;
        }

        /* 통계 카드 */
        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
            border: 1px solid #e2e8f0;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .stat-card .stat-title {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .stat-card .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: #1e293b;
            line-height: 1;
            margin-bottom: 8px;
        }

        .stat-card .stat-description {
            font-size: 12px;
            color: #94a3b8;
        }

        /* 역할별 색상 태그 */
        .role-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .role-badge.super_admin {
            background: #ef4444;
            color: white;
        }

        .role-badge.admin {
            background: #f59e0b;
            color: white;
        }

        .role-badge.manager {
            background: #8b5cf6;
            color: white;
        }

        .role-badge.user {
            background: #3b82f6;
            color: white;
        }

        .role-badge.partner {
            background: #6b7280;
            color: white;
        }

        .role-badge.viewer {
            background: #cbd5e1;
            color: #475569;
        }

        /* 테이블 스타일 */
        .data-table {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .data-table .table-header {
            background: #f8fafc;
            padding: 16px 24px;
            border-bottom: 1px solid #e2e8f0;
        }

        .data-table .table-header h3 {
            font-size: 16px;
            font-weight: 600;
            margin: 0;
            color: #1e293b;
        }

        .data-table table {
            margin: 0;
        }

        .data-table th {
            background: #f8fafc;
            color: #475569;
            font-weight: 600;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 12px 16px;
            border-bottom: 1px solid #e2e8f0;
        }

        .data-table td {
            padding: 12px 16px;
            color: #1e293b;
            font-size: 14px;
            border-bottom: 1px solid #f1f5f9;
        }

        .data-table tbody tr:hover {
            background: #f8fafc;
        }

        /* 버튼 스타일 */
        .btn-primary-custom {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
        }

        .btn-primary-custom:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .btn-success-custom {
            background: #10b981;
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
        }

        .btn-secondary-custom {
            background: #64748b;
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
        }

        .btn-outline-custom {
            background: white;
            border: 1px solid #e2e8f0;
            color: #64748b;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
        }

        /* 액션 버튼 그룹 */
        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .action-buttons .btn-sm {
            padding: 4px 12px;
            font-size: 12px;
            border-radius: 4px;
        }

        /* 필터 섹션 */
        .filter-section {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .filter-section .filter-row {
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
        }

        .filter-section .form-control,
        .filter-section .form-select {
            max-width: 200px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 14px;
        }

        /* 권한 매트릭스 테이블 */
        .permission-matrix {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .permission-matrix th {
            background: #f8fafc;
            font-size: 12px;
            font-weight: 600;
            color: #475569;
            padding: 12px;
            text-align: center;
            border: 1px solid #e2e8f0;
        }

        .permission-matrix td {
            padding: 8px;
            text-align: center;
            border: 1px solid #f1f5f9;
            background: white;
        }

        .permission-matrix td.role-cell {
            background: #f8fafc;
            font-weight: 600;
            text-align: left;
            padding-left: 16px;
        }

        .permission-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }

        .permission-badge.all {
            background: #10b981;
            color: white;
        }

        .permission-badge.dept {
            background: #3b82f6;
            color: white;
        }

        .permission-badge.own {
            background: #f59e0b;
            color: white;
        }

        .permission-badge.company {
            background: #8b5cf6;
            color: white;
        }

        .permission-badge.none {
            background: #e5e7eb;
            color: #6b7280;
        }

        /* 체크박스 스타일 */
        .form-check-input {
            width: 20px;
            height: 20px;
            border: 2px solid #e2e8f0;
            cursor: pointer;
        }

        .form-check-input:checked {
            background-color: #667eea;
            border-color: #667eea;
        }

        /* 알림 배너 */
        .alert-custom {
            border-radius: 8px;
            border: none;
            padding: 12px 16px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .alert-custom.info {
            background: #eff6ff;
            color: #1e40af;
        }

        .alert-custom.warning {
            background: #fef3c7;
            color: #92400e;
        }

        .alert-custom.success {
            background: #d1fae5;
            color: #065f46;
        }

        /* 로딩 스피너 */
        .spinner-custom {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid #e2e8f0;
            border-radius: 50%;
            border-top-color: #667eea;
            animation: spin 0.6s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* 페이지네이션 */
        .pagination-custom {
            display: flex;
            gap: 4px;
            justify-content: center;
            padding: 20px 0;
        }

        .pagination-custom .page-link {
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            color: #64748b;
            padding: 8px 12px;
            font-size: 14px;
        }

        .pagination-custom .page-link:hover {
            background: #f8fafc;
            border-color: #667eea;
            color: #667eea;
        }

        .pagination-custom .page-item.active .page-link {
            background: #667eea;
            border-color: #667eea;
            color: white;
        }
    </style>
</head>
<body>
    <!-- 메인 헤더 -->
    <div class="container-fluid p-4">
        <div class="main-header">
            <h1><i class="fas fa-shield-alt"></i> 권한 관리 시스템</h1>
        </div>

        <!-- 탭 네비게이션 -->
        <ul class="nav nav-tabs tab-navigation" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" href="#dashboard">
                    <i class="fas fa-chart-line me-2"></i>대시보드
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#users">
                    <i class="fas fa-users me-2"></i>사용자 관리
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#roles">
                    <i class="fas fa-user-tag me-2"></i>역할 관리
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#permissions">
                    <i class="fas fa-key me-2"></i>메뉴별 권한
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#audit">
                    <i class="fas fa-history me-2"></i>감사 로그
                </a>
            </li>
        </ul>

        <!-- 탭 콘텐츠 -->
        <div class="tab-content bg-white" style="min-height: 600px;">
            <!-- 대시보드 탭 -->
            <div class="tab-pane fade show active p-4" id="dashboard">
                <!-- 통계 카드 섹션 -->
                <div class="row mb-4">
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-title">전체 사용자</div>
                            <div class="stat-value">{{ total_users or 847 }}</div>
                            <div class="stat-description">
                                <i class="fas fa-arrow-up text-success"></i> 12명 증가 (이번 주)
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-title">활성 역할</div>
                            <div class="stat-value">{{ active_roles or 6 }}</div>
                            <div class="stat-description">Admin, Manager, User 등</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-title">권한 메뉴</div>
                            <div class="stat-value">{{ total_menus or 5 }}</div>
                            <div class="stat-description">사고, 안전지시서, SOP 등</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-title">오늘 접속</div>
                            <div class="stat-value">{{ today_logins or 234 }}</div>
                            <div class="stat-description">
                                <i class="fas fa-circle text-success" style="font-size: 8px;"></i> 실시간
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 차트 섹션 -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="data-table">
                            <div class="table-header">
                                <h3><i class="fas fa-chart-pie me-2"></i>역할별 사용자 분포</h3>
                            </div>
                            <div class="p-4">
                                <canvas id="roleChart" height="300"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="data-table">
                            <div class="table-header">
                                <h3><i class="fas fa-chart-bar me-2"></i>일일 접속 현황</h3>
                            </div>
                            <div class="p-4">
                                <canvas id="accessChart" height="300"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 최근 활동 -->
                <div class="data-table">
                    <div class="table-header d-flex justify-content-between align-items-center">
                        <h3><i class="fas fa-clock me-2"></i>최근 권한 변경 이력</h3>
                        <button class="btn btn-sm btn-outline-custom">
                            <i class="fas fa-sync-alt me-1"></i>새로고침
                        </button>
                    </div>
                    <table class="table mb-0">
                        <thead>
                            <tr>
                                <th>시간</th>
                                <th>사용자</th>
                                <th>변경 내용</th>
                                <th>변경자</th>
                                <th>상태</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2024-12-20 15:32</td>
                                <td>김철수 (kim.cs)</td>
                                <td>User → Manager 역할 변경</td>
                                <td>관리자</td>
                                <td><span class="badge bg-success">완료</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-20 14:28</td>
                                <td>이영희 (lee.yh)</td>
                                <td>사고 관리 쓰기 권한 추가</td>
                                <td>관리자</td>
                                <td><span class="badge bg-success">완료</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-20 11:15</td>
                                <td>박민수 (park.ms)</td>
                                <td>협력사 권한 제거</td>
                                <td>시스템</td>
                                <td><span class="badge bg-warning">대기</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- 사용자 관리 탭 -->
            <div class="tab-pane fade p-4" id="users">
                <!-- 필터 섹션 -->
                <div class="filter-section">
                    <div class="filter-row">
                        <input type="text" class="form-control" placeholder="사용자 검색 (이름, ID)">
                        <select class="form-select">
                            <option>전체 역할</option>
                            <option>Super Admin</option>
                            <option>Admin</option>
                            <option>Manager</option>
                            <option>User</option>
                            <option>Partner</option>
                            <option>Viewer</option>
                        </select>
                        <select class="form-select">
                            <option>전체 부서</option>
                            <option>IT부서</option>
                            <option>인사부서</option>
                            <option>생산부서</option>
                            <option>품질관리부서</option>
                        </select>
                        <button class="btn btn-primary-custom">
                            <i class="fas fa-search me-1"></i>검색
                        </button>
                        <button class="btn btn-success-custom ms-auto">
                            <i class="fas fa-user-plus me-1"></i>사용자 추가
                        </button>
                    </div>
                </div>

                <!-- 사용자 테이블 -->
                <div class="data-table">
                    <div class="table-header d-flex justify-content-between align-items-center">
                        <h3>사용자 목록 (총 847명)</h3>
                        <div>
                            <button class="btn btn-sm btn-outline-custom me-2">
                                <i class="fas fa-download me-1"></i>엑셀 다운로드
                            </button>
                            <button class="btn btn-sm btn-outline-custom">
                                <i class="fas fa-print me-1"></i>인쇄
                            </button>
                        </div>
                    </div>
                    <table class="table mb-0">
                        <thead>
                            <tr>
                                <th width="40">
                                    <input type="checkbox" class="form-check-input">
                                </th>
                                <th>사번</th>
                                <th>이름</th>
                                <th>로그인 ID</th>
                                <th>부서</th>
                                <th>역할</th>
                                <th>협력사</th>
                                <th>마지막 접속</th>
                                <th>상태</th>
                                <th width="150">작업</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input type="checkbox" class="form-check-input"></td>
                                <td>EMP001</td>
                                <td>홍길동</td>
                                <td>hong.gd</td>
                                <td>IT부서</td>
                                <td><span class="role-badge admin">Admin</span></td>
                                <td>-</td>
                                <td>2024-12-20 15:30</td>
                                <td><span class="badge bg-success">활성</span></td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-sm btn-primary-custom" title="편집">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-sm btn-secondary-custom" title="권한 설정">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-custom" title="삭제">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" class="form-check-input"></td>
                                <td>EMP002</td>
                                <td>김철수</td>
                                <td>kim.cs</td>
                                <td>품질관리부서</td>
                                <td><span class="role-badge manager">Manager</span></td>
                                <td>-</td>
                                <td>2024-12-20 14:15</td>
                                <td><span class="badge bg-success">활성</span></td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-sm btn-primary-custom" title="편집">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-sm btn-secondary-custom" title="권한 설정">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-custom" title="삭제">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" class="form-check-input"></td>
                                <td>EMP003</td>
                                <td>이영희</td>
                                <td>lee.yh</td>
                                <td>-</td>
                                <td><span class="role-badge partner">Partner</span></td>
                                <td>삼성전자</td>
                                <td>2024-12-19 09:20</td>
                                <td><span class="badge bg-success">활성</span></td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn btn-sm btn-primary-custom" title="편집">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn btn-sm btn-secondary-custom" title="권한 설정">
                                            <i class="fas fa-key"></i>
                                        </button>
                                        <button class="btn btn-sm btn-outline-custom" title="삭제">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- 페이지네이션 -->
                    <nav aria-label="Page navigation">
                        <ul class="pagination pagination-custom">
                            <li class="page-item">
                                <a class="page-link" href="#" aria-label="Previous">
                                    <i class="fas fa-chevron-left"></i>
                                </a>
                            </li>
                            <li class="page-item active"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item"><a class="page-link" href="#">...</a></li>
                            <li class="page-item"><a class="page-link" href="#">85</a></li>
                            <li class="page-item">
                                <a class="page-link" href="#" aria-label="Next">
                                    <i class="fas fa-chevron-right"></i>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>

            <!-- 역할 관리 탭 -->
            <div class="tab-pane fade p-4" id="roles">
                <div class="row">
                    <!-- 역할 목록 -->
                    <div class="col-md-4">
                        <div class="data-table">
                            <div class="table-header">
                                <h3><i class="fas fa-list me-2"></i>역할 목록</h3>
                            </div>
                            <div class="p-3">
                                <div class="list-group">
                                    <a href="#" class="list-group-item list-group-item-action active">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <span class="role-badge super_admin">Super Admin</span>
                                                <div class="small text-muted mt-1">시스템 전체 관리자</div>
                                            </div>
                                            <span class="badge bg-secondary">3명</span>
                                        </div>
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <span class="role-badge admin">Admin</span>
                                                <div class="small text-muted mt-1">일반 관리자</div>
                                            </div>
                                            <span class="badge bg-secondary">15명</span>
                                        </div>
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <span class="role-badge manager">Manager</span>
                                                <div class="small text-muted mt-1">팀장/매니저</div>
                                            </div>
                                            <span class="badge bg-secondary">48명</span>
                                        </div>
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <span class="role-badge user">User</span>
                                                <div class="small text-muted mt-1">일반 사용자</div>
                                            </div>
                                            <span class="badge bg-secondary">523명</span>
                                        </div>
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <span class="role-badge partner">Partner</span>
                                                <div class="small text-muted mt-1">협력사</div>
                                            </div>
                                            <span class="badge bg-secondary">185명</span>
                                        </div>
                                    </a>
                                    <a href="#" class="list-group-item list-group-item-action">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <span class="role-badge viewer">Viewer</span>
                                                <div class="small text-muted mt-1">읽기 전용</div>
                                            </div>
                                            <span class="badge bg-secondary">73명</span>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 역할 상세 정보 -->
                    <div class="col-md-8">
                        <div class="data-table">
                            <div class="table-header">
                                <h3><i class="fas fa-info-circle me-2"></i>역할 상세 정보</h3>
                            </div>
                            <div class="p-4">
                                <div class="alert-custom info mb-3">
                                    <i class="fas fa-info-circle"></i>
                                    <span>Super Admin 역할을 선택하셨습니다. 이 역할은 시스템 전체 권한을 가집니다.</span>
                                </div>

                                <form>
                                    <div class="row mb-3">
                                        <label class="col-sm-3 col-form-label">역할 코드</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" value="super_admin" readonly>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label class="col-sm-3 col-form-label">역할 이름</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" value="시스템 전체 관리자">
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label class="col-sm-3 col-form-label">설명</label>
                                        <div class="col-sm-9">
                                            <textarea class="form-control" rows="3">시스템의 모든 기능에 대한 전체 권한을 가진 최고 관리자 역할</textarea>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <label class="col-sm-3 col-form-label">우선순위</label>
                                        <div class="col-sm-9">
                                            <input type="number" class="form-control" value="1000">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-9 offset-sm-3">
                                            <button type="submit" class="btn btn-primary-custom">
                                                <i class="fas fa-save me-1"></i>저장
                                            </button>
                                            <button type="button" class="btn btn-secondary-custom ms-2">
                                                <i class="fas fa-times me-1"></i>취소
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 메뉴별 권한 탭 -->
            <div class="tab-pane fade p-4" id="permissions">
                <div class="alert-custom info mb-4">
                    <i class="fas fa-info-circle"></i>
                    <span>각 역할별로 메뉴에 대한 접근 권한을 설정합니다. C=생성, R=읽기, U=수정, D=삭제</span>
                </div>

                <!-- 권한 매트릭스 테이블 -->
                <div class="permission-matrix">
                    <table class="table mb-0">
                        <thead>
                            <tr>
                                <th width="150">역할</th>
                                <th>레벨</th>
                                <th>사고 관리</th>
                                <th>안전지시서</th>
                                <th>Follow SOP</th>
                                <th>Full Process</th>
                                <th>협력사</th>
                                <th>권한 관리</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="role-cell">
                                    <span class="role-badge super_admin">Super Admin</span>
                                </td>
                                <td>1000</td>
                                <td><span class="permission-badge all">CRUD/all</span></td>
                                <td><span class="permission-badge all">CRUD/all</span></td>
                                <td><span class="permission-badge all">CRUD/all</span></td>
                                <td><span class="permission-badge all">CRUD/all</span></td>
                                <td><span class="permission-badge all">CRUD/all</span></td>
                                <td><span class="permission-badge all">CRUD/all</span></td>
                            </tr>
                            <tr>
                                <td class="role-cell">
                                    <span class="role-badge admin">Admin</span>
                                </td>
                                <td>100</td>
                                <td><span class="permission-badge all">CRUD/all</span></td>
                                <td><span class="permission-badge all">CRUD/all</span></td>
                                <td><span class="permission-badge all">CRUD/all</span></td>
                                <td><span class="permission-badge all">CRUD/all</span></td>
                                <td><span class="permission-badge all">CRUD/all</span></td>
                                <td><span class="permission-badge none">-</span></td>
                            </tr>
                            <tr>
                                <td class="role-cell">
                                    <span class="role-badge manager">Manager</span>
                                </td>
                                <td>70</td>
                                <td><span class="permission-badge dept">CRU-/dept</span></td>
                                <td><span class="permission-badge dept">CRU-/dept</span></td>
                                <td><span class="permission-badge dept">CRU-/dept</span></td>
                                <td><span class="permission-badge dept">CRU-/dept</span></td>
                                <td><span class="permission-badge all">R---/all</span></td>
                                <td><span class="permission-badge none">-</span></td>
                            </tr>
                            <tr>
                                <td class="role-cell">
                                    <span class="role-badge user">User</span>
                                </td>
                                <td>50</td>
                                <td><span class="permission-badge own">CRU-/own</span></td>
                                <td><span class="permission-badge own">CRU-/own</span></td>
                                <td><span class="permission-badge own">CRU-/own</span></td>
                                <td><span class="permission-badge own">CRU-/own</span></td>
                                <td><span class="permission-badge all">R---/all</span></td>
                                <td><span class="permission-badge none">-</span></td>
                            </tr>
                            <tr>
                                <td class="role-cell">
                                    <span class="role-badge partner">Partner</span>
                                </td>
                                <td>30</td>
                                <td><span class="permission-badge company">R---/company</span></td>
                                <td><span class="permission-badge company">R---/company</span></td>
                                <td><span class="permission-badge none">-</span></td>
                                <td><span class="permission-badge none">-</span></td>
                                <td><span class="permission-badge own">-RU-/own</span></td>
                                <td><span class="permission-badge none">-</span></td>
                            </tr>
                            <tr>
                                <td class="role-cell">
                                    <span class="role-badge viewer">Viewer</span>
                                </td>
                                <td>10</td>
                                <td><span class="permission-badge all">R---/all</span></td>
                                <td><span class="permission-badge all">R---/all</span></td>
                                <td><span class="permission-badge all">R---/all</span></td>
                                <td><span class="permission-badge all">R---/all</span></td>
                                <td><span class="permission-badge all">R---/all</span></td>
                                <td><span class="permission-badge none">-</span></td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="p-3 bg-light">
                        <small class="text-muted">
                            범례: C=Create, R=Read, U=Update, D=Delete | 데이터 범위: all=전체, dept=부서, company=회사, own=본인
                        </small>
                    </div>
                </div>
            </div>

            <!-- 감사 로그 탭 -->
            <div class="tab-pane fade p-4" id="audit">
                <!-- 필터 섹션 -->
                <div class="filter-section">
                    <div class="filter-row">
                        <input type="date" class="form-control" value="2024-12-01">
                        <span>~</span>
                        <input type="date" class="form-control" value="2024-12-20">
                        <select class="form-select">
                            <option>전체 작업</option>
                            <option>로그인</option>
                            <option>로그아웃</option>
                            <option>조회</option>
                            <option>생성</option>
                            <option>수정</option>
                            <option>삭제</option>
                            <option>권한변경</option>
                        </select>
                        <select class="form-select">
                            <option>전체 결과</option>
                            <option>성공</option>
                            <option>실패</option>
                        </select>
                        <input type="text" class="form-control" placeholder="사용자 검색">
                        <button class="btn btn-primary-custom">
                            <i class="fas fa-search me-1"></i>조회
                        </button>
                        <button class="btn btn-success-custom ms-auto">
                            <i class="fas fa-file-excel me-1"></i>엑셀 다운로드
                        </button>
                    </div>
                </div>

                <!-- 감사 로그 테이블 -->
                <div class="data-table">
                    <div class="table-header d-flex justify-content-between align-items-center">
                        <h3>감사 로그 (총 12,847건)</h3>
                        <div class="d-flex align-items-center">
                            <span class="badge bg-success me-2">
                                <i class="fas fa-circle" style="font-size: 8px;"></i> 실시간
                            </span>
                            <button class="btn btn-sm btn-outline-custom">
                                <i class="fas fa-sync-alt me-1"></i>새로고침
                            </button>
                        </div>
                    </div>
                    <table class="table mb-0">
                        <thead>
                            <tr>
                                <th>시간</th>
                                <th>사용자</th>
                                <th>작업</th>
                                <th>메뉴/리소스</th>
                                <th>상세 내용</th>
                                <th>IP 주소</th>
                                <th>결과</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2024-12-20 15:45:32</td>
                                <td>홍길동 (hong.gd)</td>
                                <td><span class="badge bg-primary">로그인</span></td>
                                <td>시스템</td>
                                <td>SSO 로그인 성공</td>
                                <td>192.168.1.100</td>
                                <td><span class="badge bg-success">성공</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-20 15:43:21</td>
                                <td>김철수 (kim.cs)</td>
                                <td><span class="badge bg-warning">수정</span></td>
                                <td>사고 관리</td>
                                <td>사고번호 ACC20241220-001 수정</td>
                                <td>192.168.1.101</td>
                                <td><span class="badge bg-success">성공</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-20 15:40:15</td>
                                <td>이영희 (lee.yh)</td>
                                <td><span class="badge bg-danger">삭제</span></td>
                                <td>안전지시서</td>
                                <td>문서 SI-2024-045 삭제 시도</td>
                                <td>192.168.1.102</td>
                                <td><span class="badge bg-danger">실패</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-20 15:38:42</td>
                                <td>박민수 (park.ms)</td>
                                <td><span class="badge bg-info">조회</span></td>
                                <td>협력사 관리</td>
                                <td>협력사 목록 조회</td>
                                <td>192.168.1.103</td>
                                <td><span class="badge bg-success">성공</span></td>
                            </tr>
                            <tr>
                                <td>2024-12-20 15:35:18</td>
                                <td>관리자 (admin)</td>
                                <td><span class="badge bg-secondary">권한변경</span></td>
                                <td>권한 관리</td>
                                <td>사용자 kim.cs 역할 User→Manager 변경</td>
                                <td>192.168.1.1</td>
                                <td><span class="badge bg-success">성공</span></td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- 페이지네이션 -->
                    <nav aria-label="Page navigation">
                        <ul class="pagination pagination-custom">
                            <li class="page-item">
                                <a class="page-link" href="#" aria-label="Previous">
                                    <i class="fas fa-chevron-left"></i>
                                </a>
                            </li>
                            <li class="page-item active"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item"><a class="page-link" href="#">...</a></li>
                            <li class="page-item"><a class="page-link" href="#">1285</a></li>
                            <li class="page-item">
                                <a class="page-link" href="#" aria-label="Next">
                                    <i class="fas fa-chevron-right"></i>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- 차트 초기화 -->
    <script>
        // 역할별 사용자 분포 차트
        const roleCtx = document.getElementById('roleChart').getContext('2d');
        new Chart(roleCtx, {
            type: 'doughnut',
            data: {
                labels: ['Super Admin', 'Admin', 'Manager', 'User', 'Partner', 'Viewer'],
                datasets: [{
                    data: [3, 15, 48, 523, 185, 73],
                    backgroundColor: [
                        '#ef4444',
                        '#f59e0b',
                        '#8b5cf6',
                        '#3b82f6',
                        '#6b7280',
                        '#cbd5e1'
                    ]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });

        // 일일 접속 현황 차트
        const accessCtx = document.getElementById('accessChart').getContext('2d');
        new Chart(accessCtx, {
            type: 'line',
            data: {
                labels: ['00시', '04시', '08시', '12시', '16시', '20시'],
                datasets: [{
                    label: '접속 수',
                    data: [12, 8, 145, 234, 189, 87],
                    borderColor: '#667eea',
                    backgroundColor: 'rgba(102, 126, 234, 0.1)',
                    tension: 0.3
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        // 실시간 업데이트 시뮬레이션
        setInterval(() => {
            const badge = document.querySelector('.badge.bg-success');
            if (badge) {
                badge.innerHTML = '<i class="fas fa-circle" style="font-size: 8px; animation: pulse 1s infinite;"></i> 실시간';
            }
        }, 1000);
    </script>

    <style>
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
    </style>
</body>
</html>